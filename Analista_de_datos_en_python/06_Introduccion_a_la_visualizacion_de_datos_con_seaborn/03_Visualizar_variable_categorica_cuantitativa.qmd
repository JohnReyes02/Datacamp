---
title: "Visualizar una variable categórica y una cuantitativa"
author: "Edwin John Fredy Reyes Aguirre"
date: today
toc: true
toc-title: "Contenido"
---

Las variables categóricas están presentes en casi todos los conjuntos de datos, pero destacan especialmente en los datos de encuestas. En este capítulo aprenderás a crear y personalizar gráficos categóricos, como gráficos de caja, gráficos de barras, gráficos de recuentro y gráficos de puntos. Por el camino, explorarás datos de encuestas a jóvenes sobre sus intereses, a estudiantes sobre sus hábitos de estudio y a hombres adultos sobre sus sentimientos acerca de la masculinidad.

## Gráficos de recuento y de barras.

-   Gráficos categóricos

    -   Ejemplos: Gráficos de recuento y de barras
    -   Incluyen variables categóricas.
    -   Comparaciones entre grupos

    ![](images/paste-10.png){width="370"}

-   catplot()

    -   Usado para crear gráficos categóricos
    -   Tiene las mismas ventajas de `relplot()`
    -   Se pueden crear facilmente subgráficos con `col=` y `row=`

-   countplot() vs. catplot()

```{python}
#| echo: true
#| eval: false
import matplotlib.pyplot as plt
import seaborn as from django.conf import settings
sns.countplot(x='how_masculine',
              data=maculinity_data)

plt.show()
```

```{python}
#| echo: true
#| eval: false
import matplotlib.pyplot as plt
import seaborn as sns

sns.catplot(x='how_masculine',
            data=masculinity_data,
            kind='count')

plt.show()
```

-   Cambiando el orden

```{python}
#| echo: true
#| eval: false
import matplotlib.pyplot as plt
import seaborn as sns
category_order=['No answer',
                'Not at all',
                'Not very',
                'Somewhat',
                'Very']
sns.catplot(x='how_masculine',
            data=masculinity_data,
            kind='count',
            order=category_order)
plt.show()
```

![](images/paste-12.png){width="370"}

-   Gráfico de barras

    -   Muestran la media de una variable cuantitativa por categoría

```{python}
#| echo: true
#| eval: false
import matplotlib.pyplot as plt
import seaborn as sns

sns.catplot(x='day', y='total_bill',
            data=tips,
            kind='bar')
plt.show()
```

![](images/paste-13.png){width="370"}

-   Intervalos de confianza

    -   Las líneas muestran los intervalos de confianza del 95% para la media.
    -   Muestran el nivel de incertidumbre sobre las estimaciones.
    -   Asumiendo que nuestros datos sean una muestra aleatoria.

-   Desactivando los intervalos de confianza

```{python}
#| echo: true
#| eval: false
import matplotlib.plyplot as plt
import seaborn as sns

sns.catplot(x='day', y='total_bill',
            data=tips,
            kind='bar',
            ci=None)
plt.show()
```

![](images/paste-14.png){width="370"}

-   Cambiando la orientación de las barras

```{python}
#| echo: true
#| eval: false
import matplotlib.pyplot as plt
import seaborn as sns

sns.catplot(x='total_bill', y='day',
            data=tips,
            kind='bar',)
```

![](images/paste-15.png){width="370"}

Es común poner la variable categórica en el eje x


### Gráficos de recuento

En este ejercicio, volveremos a explorar nuestro conjunto de datos que contiene las respuestas a una encuesta enviada a los jóvenes. Podríamos sospechar que los jóvenes pasan mucho tiempo en internet, pero ¿Cuánto declaran utilizar internet al día? Utilicemos un gráfico de recunto para desglosar el número de respuestas de la encuesta en cada categoría y luego exploremos si cambia en función de la edad.

Como recordatorio, para crear un gráfico de recuento, utilizaremos la función `catplot()` y especificaremos el nombre de la variable categórica a contar (`x=____`), el DataFrame de pandas a utilizar (`data=____`), y el tipo de gráfico (`kind="count"`).


```{python}
import pandas as pd
import matplotlib.pyplot as plt
import seaborn as sns
plt.rcParams['figure.figsize'] = (10, 5)

ruta = './data/young-people-survey-responses.csv'
survey_data = pd.read_csv(ruta, index_col=0)
survey_data.head()
```

#### Instrucciones

1. Utiliza `sns.catplot()` para crear un gráfico de recuento utilizando el DataFrame `survery_data` con `"Internet usage"` en el eje x.


```{python}
# Create count plot of internet usage
sns.catplot(x='Internet usage',
            data=survey_data,
            kind='count')

# Show plot
plt.show()
```

2. Haz que las barras sean horizontales en lugar de verticales


```{python}
# Change the orientation of the plot
sns.catplot(y='Internet usage',
            data=survey_data,
            kind='count')

# Show plot
plt.show()
```

3. Separa este gráfico en dos subtramas de columnas contiguas en función de `"Age Category"`, que separa a los encuestados en menores de 21 años y mayores de 21 años. A partir de 21 años.


```{python}
# Separate ubti cikynb subplots based on age category
sns.catplot(y='Internet usage',
            data=survey_data,
            kind='count',
            col='Age Category')

# Show plot
plt.show()
```

Parece que la mayoría de los jóvenes usan internet durante pocas horas todos los días, independientemente de su edad.